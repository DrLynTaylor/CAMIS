---
title: "R vs SAS Confidence Intervals for Proportions"
execute:
  eval: false
---

## Introduction

There are many different methods of calculating a confidence interval for a proportion (percentage).

You need to select the method based on if you have 1 sample proportion, 2 independent samples proportions or 2 matched sample proportions. The method selected is also dependent on whether your proportion is close to 0 or 1 (or near to the 0.5 midpoint), and your sample size.

For more technical derivation and reasons for use for each of the methods listed below, see the corresponding [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html).

## General Comparison Table For Single Sample Proportions

The following table provides an overview of the results comparing between R and SAS for Single Sample Proportions. See the corresponding [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html) and [R page](https://psiaims.github.io/CAMIS/R/ci_for_prop.html) for results showing a single set of data run through both SAS and R.

| Analysis                                                 | Supported in R                            | Supported in SAS                          | Results Match                          |
|-----------------|-----------------|-----------------|----------------------|
| Clopper-Pearson Exact                                    | Yes {cardx} or {PropCIs}                  | Yes (default)                             | Yes                                    |
| Clopper-Pearson Exact (with continuity correction)       | Yes {cardx}                               | Yes                                       | Yes                                    |
| Normal approximation (wald)                              | Yes {cardx} or {PropCIs}                  | Yes (default)                             | Yes                                    |
| Normal approximation (wald) (with continuity correction) | Yes {cardx}                               | Yes                                       | Yes                                    |
| Wilson (score)                                           | Yes {cardx} or {PropCIs}                  | Yes                                       | Yes                                    |
| Agresti Coull                                            | Yes {cardx} or {PropCIs}                  | Yes                                       | results match to the 3rd decimal place |
| Jeffreys Bayesian HPD                                    | Yes {cardx}                               | Yes                                       | Yes                                    |
| midp                                                     | Yes {PropCIs}                             | Yes                                       | results match to the 3rd decimal place |
| Blaker                                                   | Yes {PropCIs}                             | Yes                                       | results match to the 5th decimal place |
| Altman & Newcombe (2002)                                 | Equation simple so can manually calculate | Equation simple so can manually calculate | Yes                                    |
| Wilson Stratified score                                  | Yes {cardx}                               | No                                        | NA                                     |

## General Comparison Table For Two Matched Sample Proportions

This section is work in progress.

## General Comparison Table For Two Independent Samples Proportions

This section is work in progress.

## Prerequisites: R Packages

See the [R page](https://psiaims.github.io/CAMIS/R/ci_for_prop.html) for more detail.

```{r}
# Example R packages required
library(cardx) 
library(PropCIs) 
```

## 
